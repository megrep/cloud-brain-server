<html>
  <head>
    <meta charset="utf-8" />
    <title>search</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/purecss@1.0.1/build/pure-min.css"
      integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="my-form">
      <form action="." method="GET" class="pure-form pure-form-aligned">
        <p>入力してくれや</p>
        <p>
          ことば<input type="text" name="content" placeholder="数学の課題" />
        </p>
        <p>
          じかん<input
            type="datetime-local"
            name="speaked_at_start"
            step="1"
            value="2000-01-01T00:00:00"
          />
        </p>
        から
        <p>
          じかん<input
            type="datetime-local"
            id="speaked_at_end"
            name="speaked_at_end"
            step="1"
            value="2019-12-14T20:40"
          />
        </p>
        <input type="submit" value="submit" class="my-button" />
      </form>
    </div>
    <script>
      function convetDateToIso(date) {
        return (
          date.getFullYear() +
          "-" +
          ("0" + (date.getMonth() + 1)).slice(-2) +
          "-" +
          ("0" + date.getDate()).slice(-2) +
          "T" +
          ("0" + date.getHours()).slice(-2) +
          ":" +
          ("0" + date.getMinutes()).slice(-2) +
          ":" +
          ("0" + date.getSeconds()).slice(-2)
        );
      }

      var now = Date.now();
      now = new Date(now);
      now = convetDateToIso(now);

      console.log(now);

      document.getElementById("speaked_at_end").value = now;
    </script>
  </body>
</html>
